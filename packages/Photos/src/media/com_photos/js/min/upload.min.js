!function(e){"use strict";Dropzone.autoDiscover=!1,e.widget("photos.upload",{_create:function(){var t=this;this.uploadedPhotoIds=[];var o={sending:function(t,o,n){var i=e(this.element).find('select[name="access"]').val();n.append("access",i)},success:function(e,o){t.uploadedPhotoIds.push(o.id)},queuecomplete:function(){var o=t.options.setsUrl;e.each(t.uploadedPhotoIds,function(e,t){o+="&photo_id[]="+t}),e.get(o,function(o){e(t.element).html(o)})}};o=e.extend({},this.options,o),this.dropzone=new Dropzone(this.options.filedrop,o),this._on(this.element,{'click [data-trigger="UploadPhotos"]':function(e){e.preventDefault(),this.dropzone.enqueueFiles(this.dropzone.getFilesWithStatus(Dropzone.ADDED))}}),this._on(this.element,{'click [data-trigger="RemovePhotos"]':function(e){e.preventDefault(),this.dropzone.removeAllFiles(!0)}})}})}(jQuery,window);