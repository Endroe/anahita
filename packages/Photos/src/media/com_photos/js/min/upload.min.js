!function(t){"use strict";Dropzone.autoDiscover=!1,t.widget("anahita.photoUpload",{_create:function(){var e=this;this.uploadedPhotoIds=[];var o={sending:function(e,o,n){var i=t(this.element).find('select[name="access"]').val();n.append("access",i)},success:function(t,o){e.uploadedPhotoIds.push(o.id)},queuecomplete:function(){if(e.uploadedPhotoIds.length>0){var o=e.options.setsUrl;t.each(e.uploadedPhotoIds,function(t,e){o+="&photo_id[]="+e}),t.get(o,function(o){t(e.element).html(o)})}}};o=t.extend({},this.options,o),this.dropzone=new Dropzone(this.options.filedrop,o),this._on(this.element,{'click [data-trigger="UploadPhotos"]':function(t){t.preventDefault(),this.dropzone.enqueueFiles(this.dropzone.getFilesWithStatus(Dropzone.ADDED))}}),this._on(this.element,{'click [data-trigger="RemovePhotos"]':function(t){t.preventDefault(),this.dropzone.removeAllFiles(!0)}})}}),t.widget("photos.photosSetAssignment",{_create:function(){var e=t(this.element).find('input[name="title"]'),o=t(this.element).find('select[name="id"]');this._on(o,{change:function(o){""!=t(o.target).val()?e.attr("disabled",!0):e.attr("disabled",!1)}}),this._on(e,{change:function(e){""!=t(e.target).val()?o.attr("disabled",!0):o.attr("disabled",!1)}})}}),t(document).ajaxSuccess(function(){t("#photos-set-assignment").photosSetAssignment()})}(jQuery,window);